/* bp_perceptron.param.def
 * 
 * Parameter definitions for Perceptron Branch Predictor
 * Add these entries to Scarab's bp.param.def file
 * 
 * Syntax: DEF_PARAM(type, name, default_value, description)
 */

/*****************************************************************************
 * PERCEPTRON BRANCH PREDICTOR PARAMETERS
 * 
 * Hardware budget calculation:
 *   total_bytes = (2^TABLE_BITS) * (HIST_LEN + 1) * 1 byte/weight
 * 
 * Recommended configurations from the paper (Table 1):
 * 
 *   Budget    HIST_LEN   TABLE_BITS   Threshold   Total Bytes
 *   ------    --------   ----------   ---------   -----------
 *   1 KB      12         6            37          832
 *   2 KB      22         5            56          736
 *   4 KB      28         6            68          1856
 *   8 KB      34         6            79          2240
 *   16 KB     36         7            83          4736
 *   32 KB     59         6            127         3840
 *   64 KB     59         7            127         7680
 * 
 *****************************************************************************/

/* History length (n in paper)
 * Longer history = more correlation information but more weights per perceptron
 * Paper found optimal values between 12 (1KB) and 62 (64KB+)
 * Default of 28 is optimal for ~4KB budget */
DEF_PARAM(uns32, PERCEPTRON_HIST_LEN, 28, 
          "Perceptron history length (number of history bits to consider)")

/* Table size as log2(num_entries)
 * More entries = less aliasing between different branches
 * Paper found 64-128 entries works well for most budgets */
DEF_PARAM(uns32, PERCEPTRON_TABLE_BITS, 7, 
          "Log2 of number of perceptrons in table (7 = 128 entries)")

/* Enable perceptron predictor (vs other predictors) */
DEF_PARAM(Flag, BP_PERCEPTRON_ON, FALSE, 
          "Enable perceptron branch predictor")


/*****************************************************************************
 * EXAMPLE PARAMS.in CONFIGURATION
 * 
 * Add these lines to your PARAMS.in file to use the perceptron predictor:
 * 
 * # Enable perceptron predictor
 * --bp_perceptron_on 1
 * 
 * # 4KB configuration (matches paper's best for 4KB budget)
 * --perceptron_hist_len 28
 * --perceptron_table_bits 6
 * 
 * # OR: 16KB configuration
 * --perceptron_hist_len 36
 * --perceptron_table_bits 7
 * 
 *****************************************************************************/


/*****************************************************************************
 * PRESET CONFIGURATIONS (for easy switching)
 * 
 * You can add these as additional parameters for preset selection:
 *****************************************************************************/

/* Preset: 1KB budget */
/*
DEF_PARAM(Flag, PERCEPTRON_PRESET_1K, FALSE, "Use 1KB preset")
// If set: HIST_LEN=12, TABLE_BITS=6
*/

/* Preset: 4KB budget (recommended default) */
/*
DEF_PARAM(Flag, PERCEPTRON_PRESET_4K, TRUE, "Use 4KB preset")  
// If set: HIST_LEN=28, TABLE_BITS=6
*/

/* Preset: 64KB budget (high accuracy) */
/*
DEF_PARAM(Flag, PERCEPTRON_PRESET_64K, FALSE, "Use 64KB preset")
// If set: HIST_LEN=59, TABLE_BITS=7
*/
